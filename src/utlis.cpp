template <typename T>
void allocate_aligned_memory(T*& ptr, int size) {
    // // allocate and get the pointer
    // void* void_ptr = MetalMatmulInt4IMP::allocateSharedMem(size);
    // if (void_ptr == NULL) {
    //     std::cerr << "Metal memory allocation failed." << std::endl;
    //     exit(-1);
    // }
    // ptr = (T*)void_ptr;
}